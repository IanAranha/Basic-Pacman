<!DOCTYPE html>
<html lang="en">
<head>
	<title>PacMan</title>	
	<link rel = "stylesheet" type="text/css" href= "style.css">
</head>

<body>
    <div id="world"></div>
    <h3 id = "score"></h3>
    <h3 id = "coins"></h3>
</body>
<script>
//// 1 = <div class= 'wall'></div>
//// 3 = <div class= "ground"></div>
//// 5 = <div class= "pacman"></div>
//// 7= <div class= "coin"></div>

var map = [
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,5,7,7,7,7,1,7,7,7,7,7,1,7,7,7,7,7,1],
    [1,7,1,1,1,7,1,7,1,1,1,7,1,7,1,1,1,7,1],
    [1,7,1,1,1,7,1,7,1,1,1,7,1,7,1,1,1,7,1],
    [1,7,1,1,1,7,1,7,1,1,1,7,1,7,1,1,1,7,1],
    [1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,1],
    [1,7,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,7,1],
    [1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,1],
    [1,7,1,1,1,7,1,7,1,1,1,7,1,7,1,1,1,7,1],
    [1,7,1,1,1,7,1,7,1,1,1,7,1,7,1,1,1,7,1],
    [1,7,1,1,1,7,1,7,1,1,1,7,1,7,1,1,1,7,1],
    [1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
];
    
var pacman = {
    x: 1,
    y: 1,
};
    
var totalCoins = 0;
console.log("at coins")  
for(var x = 0; x < map.length; x++){
    for(var y = 0; y < map[x].length; y++){
        if(map[x][y] == 7){
            totalCoins += 1;
        }
    }
}
var score = 0;
document.getElementById("score").innerHTML = "SCORE: " + score;
document.getElementById("coins").innerHTML = "Total Coins: " + totalCoins; 

function drawMap(){
    document.getElementById("world").innerHTML="";

    for(var y = 0; y < map.length; y++){
        for(var x = 0; x < map[y].length; x++){
            if(map[y][x] === 1){
                document.getElementById("world").innerHTML+="<div class= 'wall'></div>"
            }
            else if(map[y][x] === 3){
                document.getElementById("world").innerHTML+="<div class= 'ground'></div>"
            }
            if(map[y][x] === 5){
                document.getElementById("world").innerHTML+="<div class= 'pacman'></div>"
            }
            if(map[y][x] === 7){
                document.getElementById("world").innerHTML+="<div class= 'coin'></div>"
            }
        }
        document.getElementById("world").innerHTML+="<br>";
    }
}

document.onkeydown = function(event){
    if(event.keyCode === 38){
        //up
        if(map[pacman.y-1][pacman.x] !==1){
            if(map[pacman.y-1][pacman.x] == 7){
                    score += 10;
                    totalCoins -= 1;
                    document.getElementById("score").innerHTML = "SCORE: " + score;
                    document.getElementById("coins").innerHTML = "Total Coins: " + totalCoins;
                }
            map[pacman.y][pacman.x] = 3;
            pacman.y = pacman.y-1;
            map[pacman.y][pacman.x] = 5;
            drawMap();
        }
    }
    else if(event.keyCode === 39){
        //right
        if(map[pacman.y][pacman.x+1] !== 1){
            if(map[pacman.y][pacman.x+1] == 7){
                    score += 10
                    totalCoins -= 1;
                    document.getElementById("score").innerHTML = "SCORE: " + score;
                    document.getElementById("coins").innerHTML = "Total Coins: " + totalCoins;
                }
            map[pacman.y][pacman.x] = 3;
            pacman.x = pacman.x+1;
            map[pacman.y][pacman.x] = 5;
            drawMap();
        }
    }
    else if(event.keyCode === 40){
        //down
        if(map[pacman.y+1][pacman.x] !== 1 ){
            if(map[pacman.y+1][pacman.x] == 7){
                    score += 10
                    totalCoins -= 1
                    document.getElementById("score").innerHTML = "SCORE: " + score;
                    document.getElementById("coins").innerHTML = "Total Coins: " + totalCoins;
                }
            map[pacman.y][pacman.x] = 3;
            pacman.y = pacman.y+1;
            map[pacman.y][pacman.x] = 5;
            drawMap();
        }
    }
    else if(event.keyCode === 37){
        //left
        if(map[pacman.y][pacman.x-1] !== 1){
            if(map[pacman.y][pacman.x-1] == 7){
                    score += 10
                    totalCoins -= 1
                    document.getElementById("score").innerHTML = "SCORE: " + score;
                    document.getElementById("coins").innerHTML = "Total Coins: " + totalCoins;
                }
            map[pacman.y][pacman.x] = 3;
            pacman.x = pacman.x-1;
            map[pacman.y][pacman.x] = 5;
            drawMap();
        }
    }
}

drawMap();
    
</script>
</html>
